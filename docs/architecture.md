# JaePa 시스템 아키텍처

JaePa 시스템의 전체 아키텍처 및 설계에 대한 문서입니다.

## 개요

JaePa는 금융 뉴스 크롤링과 감성 분석을 통해 투자 의사결정을 돕는 도구입니다. 시스템은 크게 데이터 수집, 데이터 분석, 그리고 사용자 인터페이스의 세 가지 핵심 구성 요소로 이루어져 있습니다.

## 시스템 구성 요소

```
                 +-------------------+
                 |   사용자 인터페이스   |
                 | (웹/모바일 애플리케이션)|
                 +----------+--------+
                            |
                            v
+----------------------+    |    +----------------------+
|     백엔드 API        |<---+--->|     데이터베이스       |
| (FastAPI 서버)        |         | (MongoDB)            |
+----------+-----------+         +----------------------+
           |
           v
+----------+-----------+         +----------------------+
|    데이터 수집 모듈     |-------->|    데이터 분석 모듈    |
| (크롤러, 데이터 수집기)  |         | (감성 분석, 상관관계 분석)|
+----------------------+         +----------------------+
```

### 1. 데이터 수집 모듈

#### 1.1 뉴스 크롤링 (`news_crawler.py`)

- **목적**: 금융 뉴스 사이트에서 관련 기사 수집
- **주요 기능**:
  - 다양한 뉴스 소스에서 데이터 수집 (Reuters, Bloomberg, Financial Times, CNBC, WSJ 등)
  - 키워드 기반 검색 및 최신 뉴스 수집
  - 기사 내용 추출 및 메타데이터 수집
  - MongoDB에 데이터 저장
- **기술 스택**:
  - Python
  - Requests, BeautifulSoup4
  - MongoDB
  - 멀티스레딩/비동기 처리

#### 1.2 주식 데이터 수집 (`stock_data_crawler.py`)

- **목적**: 주식 및 암호화폐 시장 데이터 수집
- **주요 기능**:
  - yfinance 라이브러리를 활용한 주식 데이터 수집
  - CoinGecko API를 통한 암호화폐 데이터 수집
  - 기술적 지표 계산 (이동평균선, RSI, 볼린저 밴드, MACD 등)
  - MongoDB에 데이터 저장
- **기술 스택**:
  - Python
  - yfinance, pandas
  - Requests (API 호출)
  - MongoDB

### 2. 데이터 분석 모듈

#### 2.1 감성 분석 (`sentiment_analyzer.py`)

- **목적**: 금융 뉴스 기사의 감성 분석
- **주요 기능**:
  - FinBERT 모델을 활용한 금융 특화 감성 분석
  - 긍정/중립/부정 감성 점수 계산
  - 기사별 신뢰도 점수 계산
- **기술 스택**:
  - Python
  - Transformers (Hugging Face)
  - PyTorch
  - CUDA (GPU 가속)

#### 2.2 상관관계 분석 (`correlation_analyzer.py`)

- **목적**: 뉴스 감성과 주가 변동의 상관관계 분석
- **주요 기능**:
  - 감성 점수와 주가 변동 간의 상관관계 계산
  - 시차 효과 분석 (뉴스가 주가에 영향을 미치는 시간)
  - 감성 트렌드 추적 및 시각화
- **기술 스택**:
  - Python
  - pandas, numpy
  - statsmodels
  - scikit-learn

### 3. 백엔드 API

#### 3.1 API 서버 (`main.py`)

- **목적**: 클라이언트에 데이터 및 분석 결과 제공
- **주요 기능**:
  - RESTful API 엔드포인트 제공
  - 사용자 인증 및 권한 관리
  - 데이터 접근 및 쿼리 처리
  - 분석 결과 반환
- **기술 스택**:
  - Python
  - FastAPI
  - JWT 인증
  - OpenAPI (Swagger)

#### 3.2 데이터 접근 레이어 (`backend/app/models/`)

- **목적**: 데이터베이스와의 상호작용 추상화
- **주요 기능**:
  - MongoDB 데이터 접근 래퍼
  - 데이터 유효성 검사
  - 쿼리 최적화
- **기술 스택**:
  - Python
  - Motor (비동기 MongoDB 드라이버)
  - Pydantic (데이터 유효성 검사)

### 4. 사용자 인터페이스

#### 4.1 웹 애플리케이션 (계획됨)

- **목적**: 사용자에게 데이터 시각화 및 분석 결과 제공
- **주요 기능**:
  - 대시보드 인터페이스
  - 뉴스 감성 및 주가 차트 시각화
  - 사용자 설정 및 알림 관리
- **기술 스택**:
  - React.js
  - Redux (상태 관리)
  - Chart.js / D3.js (데이터 시각화)
  - Material-UI (UI 컴포넌트)

#### 4.2 모바일 애플리케이션 (계획됨)

- **목적**: 모바일 사용자에게 알림 및 정보 제공
- **주요 기능**:
  - 푸시 알림
  - 모바일 최적화 대시보드
  - 오프라인 지원
- **기술 스택**:
  - React Native
  - Redux
  - Native Base

## 데이터 흐름

1. **데이터 수집**:
   - 뉴스 크롤러가 정기적으로 금융 뉴스 사이트에서 기사 수집
   - 주식 데이터 수집기가 주식 및 암호화폐 데이터 수집
   - 수집된 데이터는 MongoDB에 저장

2. **데이터 분석**:
   - 감성 분석기가 수집된 뉴스에 대해 감성 분석 수행
   - 분석 결과는 MongoDB에 저장
   - 상관관계 분석기가 뉴스 감성과 주가 데이터 간의 관계 분석

3. **데이터 제공**:
   - 백엔드 API가 분석된 데이터에 접근
   - 클라이언트 요청에 따라 필요한 데이터 및 분석 결과 제공
   - 웹/모바일 애플리케이션이 API를 통해 데이터 표시 및 시각화

## 배포 아키텍처 (계획됨)

### 개발 환경

```
+------------------------+
|    개발자 로컬 환경      |
| (Docker Compose 기반)   |
+------------------------+
```

### 프로덕션 환경 (클라우드 기반)

```
                      +----------------------+
                      |   CDN / 로드 밸런서    |
                      +----------+-----------+
                                 |
            +--------------------+--------------------+
            |                                        |
 +----------+-----------+                +-----------+----------+
 |   웹 서버 (클러스터)    |                |   API 서버 (클러스터)  |
 | (Nginx + React App)  |<-------------->| (FastAPI)             |
 +----------------------+                +----------------------+
                                                    |
                                         +----------+-----------+
                                         |    MongoDB Atlas     |
                                         | (데이터베이스 클러스터)  |
                                         +----------------------+
```

### 마이크로서비스 전환 계획

프로젝트 규모가 커짐에 따라 다음과 같은 마이크로서비스 아키텍처로 전환 계획:

```
     +-------------------+
     |  API 게이트웨이    |
     | (인증, 라우팅, 캐싱) |
     +--------+----------+
              |
  +-----------+-----------+-----------+-----------+
  |           |           |           |           |
+-+--+     +--+--+     +--+--+     +--+--+     +--+--+
|뉴스 |     |주식  |     |감성  |     |분석  |     |사용자|
|서비스|     |서비스|     |서비스|     |서비스|     |서비스|
+----+     +-----+     +-----+     +-----+     +-----+
```

## 보안 고려사항

1. **인증 및 인가**:
   - JWT 기반 인증 시스템
   - 역할 기반 접근 제어 (RBAC)
   - 토큰 갱신 메커니즘

2. **데이터 보안**:
   - 전송 중 암호화 (HTTPS)
   - 민감한 정보 암호화 저장
   - API 키 보안 관리

3. **인프라 보안**:
   - 방화벽 설정
   - 네트워크 분리
   - 정기적인 보안 패치

## 확장성 전략

1. **수평적 확장**:
   - 서버리스 아키텍처 검토
   - 컨테이너 오케스트레이션 (Kubernetes)
   - 로드 밸런싱

2. **성능 최적화**:
   - 데이터베이스 인덱싱 및 샤딩
   - 캐싱 전략 (Redis)
   - 비동기 처리 및 이벤트 기반 아키텍처

3. **리소스 관리**:
   - 자동 스케일링
   - 리소스 모니터링 및 알림
   - 비용 최적화

## 개발 및 배포 파이프라인

1. **CI/CD 파이프라인**:
   - GitHub Actions 통합
   - 자동화된 테스트 및 배포
   - 코드 품질 검사

2. **환경 관리**:
   - 개발, 스테이징, 프로덕션 환경 분리
   - 환경별 구성 관리
   - 인프라스트럭처 코드화 (IaC)

3. **모니터링 및 로깅**:
   - 중앙화된 로깅 시스템
   - 성능 모니터링
   - 에러 추적 및 알림
